{"ast":null,"code":"import _objectSpread from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/muhammadawais/Desktop/Chat-It/client/src/pages/Coding.js\";\n// import React, { Component } from \"react\";\n// import { Controlled as CodeMirror } from \"react-codemirror2\";\n// import Pusher from \"pusher-js\";\n// import pushid from \"pushid\";\n// import axios from \"axios\";\n// // import io from 'socket.io-client'\n// // import \"./App.css\";\n// import \"codemirror/lib/codemirror.css\";\n// import \"codemirror/theme/material.css\";\n// import \"codemirror/mode/htmlmixed/htmlmixed\";\n// import \"codemirror/mode/css/css\";\n// import \"codemirror/mode/javascript/javascript\";\n// class CodingPage extends Component {\n//   constructor() {\n//     super();\n//     this.state = {\n//       html: \"\",\n//       js: \"\",\n//     };\n//   }\n//   componentDidUpdate() {\n//     this.runCode();\n//   }\n//   syncUpdates = () => {\n//     const data = { ...this.state };    \n//   };\n//   runCode = () => {\n//     const { html, js } = this.state;\n//     const iframe = this.refs.iframe;\n//     const document = iframe.contentDocument;\n//     const documentContents = `\n//       <!DOCTYPE html>\n//       <html lang=\"en\">\n//       <head>\n//         <meta charset=\"UTF-8\">\n//         <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n//         <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n//         <title>Document</title>\n//       </head>\n//       <body>\n//         ${html}\n//         <script type=\"text/javascript\">\n//           ${js}\n//         </script>\n//       </body>\n//       </html>\n//     `;\n//     document.open();\n//     document.write(documentContents);\n//     document.close();\n//   };\n//   render() {\n//     console.log(this.state.key1)\n//     const { html, js } = this.state;\n//     const codeMirrorOptions = {\n//       theme: \"material\",\n//       lineNumbers: true,\n//       scrollbarStyle: null,\n//       lineWrapping: true\n//     };\n//     return (\n//       <div className=\"App\">\n//         <section className=\"playground\">\n//           <div className=\"code-editor html-code\">\n//             <div className=\"editor-header\">HTML</div>\n//             <CodeMirror\n//               value={html}\n//               options={{\n//                 mode: \"htmlmixed\",\n//                 ...codeMirrorOptions\n//               }}\n//               onBeforeChange={(editor, data, html) => {\n//                 this.setState({ html }, () => this.syncUpdates());\n//               }}\n//             />\n//           </div>\n//           <div className=\"code-editor js-code\">\n//             <div className=\"editor-header\">JavaScript</div>\n//             <CodeMirror\n//               value={js}\n//               options={{\n//                 mode: \"javascript\",\n//                 ...codeMirrorOptions\n//               }}\n//               onBeforeChange={(editor, data, js) => {\n//                 this.setState({ js }, () => this.syncUpdates());\n//               }}\n//             />\n//           </div>\n//         </section>\n//         <section className=\"result\">\n//           <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n//         </section>\n//       </div>\n//     );\n//   }\n// }\n// export default CodingPage;\nimport React from \"react\";\nimport Header from \"../Components/header\";\nimport { database } from \"firebase\";\nimport CodeMirror from \"react-codemirror\";\nimport \"./coding.css\";\n\nrequire(\"codemirror/lib/codemirror.css\");\n\nrequire(\"codemirror/mode/htmlmixed/htmlmixed\");\n\nrequire(\"codemirror/mode/javascript/javascript\");\n\nrequire(\"codemirror/theme/dracula.css\");\n\nvar CodingPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CodingPage, _React$Component);\n\n  // constructor() {\n  //   // super();\n  //   this.state = {\n  //     html: '',\n  //     css: '',\n  //   };\n  // }\n  function CodingPage() {\n    var _this;\n\n    _classCallCheck(this, CodingPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CodingPage).call(this));\n\n    _this.componentDidMount = function () {\n      var params = _this.props.match.params;\n\n      var self = _assertThisInitialized(_assertThisInitialized(_this));\n\n      database().ref(\"/code-sessions/\" + params.sessionid).once(\"value\").then(function (snapshot) {\n        self.setState({\n          code: snapshot.val().content + \"\",\n          createdon: snapshot.val().createdon\n        }, function () {\n          var content = snapshot.val().content;\n          self.codemirror.getCodeMirror().setValue(content);\n        });\n        _this.codeRef = database().ref(\"code-sessions/\" + params.sessionid);\n\n        _this.codeRef.on(\"value\", function (snapshot) {\n          self.setState({\n            code: snapshot.val().content\n          });\n          var currentCursorPos = self.state.cursorPosition;\n          self.codemirror.getCodeMirror().setValue(snapshot.val().content);\n          self.setState({\n            cursorPosition: currentCursorPos\n          });\n          self.changeCursorPos();\n        });\n      }).catch(function (e) {\n        self.codemirror.getCodeMirror().setValue(\"No Sessions Found!\");\n      });\n    };\n\n    _this.changeCursorPos = function () {\n      var _this$state$cursorPos = _this.state.cursorPosition,\n          line = _this$state$cursorPos.line,\n          ch = _this$state$cursorPos.ch;\n\n      _this.codemirror.getCodeMirror().doc.setCursor(line, ch);\n    };\n\n    _this.onChange = function (newVal, change) {\n      // console.log(newVal, change);\n      _this.setState({\n        cursorPosition: {\n          line: _this.codemirror.getCodeMirror().doc.getCursor().line,\n          ch: _this.codemirror.getCodeMirror().doc.getCursor().ch\n        }\n      }, function () {});\n\n      _this.codeRef.child(\"content\").set(newVal);\n    };\n\n    _this.syncUpdates = function () {\n      var data = _objectSpread({}, _this.state);\n    };\n\n    _this.runCode = function () {\n      var _this$state = _this.state,\n          html = _this$state.html,\n          code1 = _this$state.code1;\n      var iframe = _this.refs.iframe;\n      var document = iframe.contentDocument;\n      var documentContents = \"\\n    <!DOCTYPE html>\\n    <html lang=\\\"en\\\">\\n    <head>\\n      <meta charset=\\\"UTF-8\\\">\\n      <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n      <meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"ie=edge\\\">\\n      <title>Document</title>\\n    </head>\\n    <body>\\n      \".concat(code1, \"\\n\\n      <script type=\\\"text/javascript\\\">\\n        \").concat(html, \"\\n      </script>\\n    </body>\\n    </html>\\n  \");\n      document.open();\n      document.write(documentContents);\n      document.close();\n    };\n\n    _this.state = {\n      code: \"Loading...\",\n      code1: \"<h1 id='demo'></h1>\",\n      cursorPosition: {\n        line: 0,\n        ch: 0\n      }\n    };\n    return _this;\n  }\n\n  _createClass(CodingPage, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.runCode();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var html = this.state.html;\n      return React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }, React.createElement(Header, {\n        style: {\n          background: \"#1d1f27\"\n        },\n        extras: React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 240\n          },\n          __self: this\n        }, this.state.createdon ? \"Created On: \".concat(this.state.createdon) : \"\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"coding-page\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"codeArea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(CodeMirror, {\n        ref: function ref(r) {\n          return _this2.codemirror = r;\n        },\n        className: \"code-mirror-container\",\n        value: this.state.code // value={js}\n        ,\n        onChange: this.onChange,\n        options: {\n          theme: \"dracula\",\n          lineNumbers: true,\n          readOnly: false,\n          mode: \"javascript\"\n        },\n        onBeforeChange: function onBeforeChange(editor, data, js) {\n          _this2.setState({\n            js: js\n          }, function () {\n            return _this2.syncUpdates();\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266\n        },\n        __self: this\n      }, React.createElement(CodeMirror // value={this.state.code1}\n      , {\n        value: html,\n        options: {\n          mode: 'htmlmixed',\n          theme: 'dracula',\n          lineNumbers: true,\n          readOnly: false\n        },\n        onBeforeChange: function onBeforeChange(editor, data, html) {\n          _this2.setState({\n            html: html\n          }, function () {\n            return _this2.syncUpdates();\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      })), React.createElement(\"section\", {\n        className: \"result\",\n        id: \"iframe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 281\n        },\n        __self: this\n      }, React.createElement(\"iframe\", {\n        title: \"result\",\n        className: \"iframe\",\n        ref: \"iframe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return CodingPage;\n}(React.Component);\n\nexport { CodingPage as default };","map":{"version":3,"sources":["/Users/muhammadawais/Desktop/Chat-It/client/src/pages/Coding.js"],"names":["React","Header","database","CodeMirror","require","CodingPage","componentDidMount","params","props","match","self","ref","sessionid","once","then","snapshot","setState","code","val","content","createdon","codemirror","getCodeMirror","setValue","codeRef","on","currentCursorPos","state","cursorPosition","changeCursorPos","catch","e","line","ch","doc","setCursor","onChange","newVal","change","getCursor","child","set","syncUpdates","data","runCode","html","code1","iframe","refs","document","contentDocument","documentContents","open","write","close","background","r","theme","lineNumbers","readOnly","mode","editor","js","Component"],"mappings":"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","sourcesContent":["// import React, { Component } from \"react\";\n// import { Controlled as CodeMirror } from \"react-codemirror2\";\n// import Pusher from \"pusher-js\";\n// import pushid from \"pushid\";\n// import axios from \"axios\";\n// // import io from 'socket.io-client'\n\n// // import \"./App.css\";\n// import \"codemirror/lib/codemirror.css\";\n// import \"codemirror/theme/material.css\";\n\n// import \"codemirror/mode/htmlmixed/htmlmixed\";\n// import \"codemirror/mode/css/css\";\n// import \"codemirror/mode/javascript/javascript\";\n\n\n// class CodingPage extends Component {\n//   constructor() {\n\n\n//     super();\n//     this.state = {\n//       html: \"\",\n//       js: \"\",\n//     };\n//   }\n\n//   componentDidUpdate() {\n//     this.runCode();\n//   }\n\n//   syncUpdates = () => {\n//     const data = { ...this.state };    \n//   };\n\n//   runCode = () => {\n//     const { html, js } = this.state;\n\n//     const iframe = this.refs.iframe;\n//     const document = iframe.contentDocument;\n//     const documentContents = `\n//       <!DOCTYPE html>\n//       <html lang=\"en\">\n//       <head>\n//         <meta charset=\"UTF-8\">\n//         <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n//         <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n//         <title>Document</title>\n//       </head>\n//       <body>\n//         ${html}\n\n//         <script type=\"text/javascript\">\n//           ${js}\n//         </script>\n//       </body>\n//       </html>\n//     `;\n\n//     document.open();\n//     document.write(documentContents);\n//     document.close();\n//   };\n\n//   render() {\n\n//     console.log(this.state.key1)\n//     const { html, js } = this.state;\n//     const codeMirrorOptions = {\n//       theme: \"material\",\n//       lineNumbers: true,\n//       scrollbarStyle: null,\n//       lineWrapping: true\n//     };\n\n//     return (\n//       <div className=\"App\">\n//         <section className=\"playground\">\n//           <div className=\"code-editor html-code\">\n//             <div className=\"editor-header\">HTML</div>\n//             <CodeMirror\n//               value={html}\n//               options={{\n//                 mode: \"htmlmixed\",\n//                 ...codeMirrorOptions\n//               }}\n//               onBeforeChange={(editor, data, html) => {\n//                 this.setState({ html }, () => this.syncUpdates());\n//               }}\n//             />\n//           </div>\n//           <div className=\"code-editor js-code\">\n//             <div className=\"editor-header\">JavaScript</div>\n//             <CodeMirror\n//               value={js}\n//               options={{\n//                 mode: \"javascript\",\n//                 ...codeMirrorOptions\n//               }}\n//               onBeforeChange={(editor, data, js) => {\n//                 this.setState({ js }, () => this.syncUpdates());\n//               }}\n//             />\n//           </div>\n//         </section>\n//         <section className=\"result\">\n//           <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n//         </section>\n//       </div>\n//     );\n//   }\n// }\n\n// export default CodingPage;\n\n\n    \nimport React from \"react\";\nimport Header from \"../Components/header\";\nimport { database } from \"firebase\";\nimport CodeMirror from \"react-codemirror\";\nimport \"./coding.css\";\n\nrequire(\"codemirror/lib/codemirror.css\");\nrequire(\"codemirror/mode/htmlmixed/htmlmixed\");\nrequire(\"codemirror/mode/javascript/javascript\");\nrequire(\"codemirror/theme/dracula.css\");\n\nexport default class CodingPage extends React.Component {\n  // constructor() {\n  //   // super();\n  //   this.state = {\n  //     html: '',\n  //     css: '',\n  //   };\n  // }\n  constructor() {\n\n  super();\n  this.state = {\n    code: \"Loading...\",\n    code1: `<h1 id='demo'></h1>`,\n    cursorPosition: {\n      line: 0,\n      ch: 0\n    }\n  };\n}\n  componentDidMount = () => {\n\n    const { params } = this.props.match;\n    let self = this;\n    database()\n      .ref(\"/code-sessions/\" + params.sessionid)\n      .once(\"value\")\n      .then(snapshot => {\n        self.setState({ code: snapshot.val().content + \"\", createdon: snapshot.val().createdon }, () => {\n          let content = snapshot.val().content;\n\n          self.codemirror.getCodeMirror().setValue(content);\n        });\n        this.codeRef = database().ref(\"code-sessions/\" + params.sessionid);\n        this.codeRef.on(\"value\", function(snapshot) {\n          self.setState({\n            code: snapshot.val().content\n          });\n          var currentCursorPos = self.state.cursorPosition;\n          self.codemirror.getCodeMirror().setValue(snapshot.val().content);\n          self.setState({ cursorPosition: currentCursorPos });\n          self.changeCursorPos();\n        });\n      })\n      .catch(e => {\n        self.codemirror.getCodeMirror().setValue(\"No Sessions Found!\");\n      });\n  };\n  changeCursorPos = () => {\n    const { line, ch } = this.state.cursorPosition;\n    this.codemirror.getCodeMirror().doc.setCursor(line, ch);\n  };\n  onChange = (newVal, change) => {\n    // console.log(newVal, change);\n    this.setState(\n      {\n        cursorPosition: {\n          line: this.codemirror.getCodeMirror().doc.getCursor().line,\n          ch: this.codemirror.getCodeMirror().doc.getCursor().ch\n        }\n      },\n      () => {}\n    );\n    this.codeRef.child(\"content\").set(newVal);\n  };\n\ncomponentDidUpdate() {\n  this.runCode();\n}\n\nsyncUpdates = () => {\n  const data = { ...this.state }; \n};\n\nrunCode = () => {\n  const { html, code1 } = this.state;\n\n  const iframe = this.refs.iframe;\n  const document = iframe.contentDocument;\n  const documentContents = `\n    <!DOCTYPE html>\n    <html lang=\"en\">\n    <head>\n      <meta charset=\"UTF-8\">\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n      <title>Document</title>\n    </head>\n    <body>\n      ${code1}\n\n      <script type=\"text/javascript\">\n        ${html}\n      </script>\n    </body>\n    </html>\n  `;\n\n  document.open();\n  document.write(documentContents);\n  document.close();\n};\n\n  render() {\n    const { html } = this.state;\n\n    return (\n      <React.Fragment>\n        <Header\n          style={{ background: \"#1d1f27\" }}\n          extras={\n            <div>\n              {this.state.createdon\n                ? `Created On: ${this.state.createdon}`\n                : \"\"}\n            </div>\n          }\n        />\n        <div className=\"coding-page\">\n        <div className=\"codeArea\">\n          <CodeMirror\n            ref={r => (this.codemirror = r)}\n            className=\"code-mirror-container\"\n            value={this.state.code}\n            // value={js}\n            onChange={this.onChange}\n            options={{\n              theme: \"dracula\",\n              lineNumbers: true,\n              readOnly: false,\n              mode: \"javascript\"\n            }}\n            onBeforeChange={(editor, data, js) => {\n              this.setState({ js }, () => this.syncUpdates());\n            }}\n          />\n          </div>\n          <div>\n          <CodeMirror\n            // value={this.state.code1}\n            value={html}\n            options={{\n              mode: 'htmlmixed',\n              theme: 'dracula',\n              lineNumbers: true,\n              readOnly: false,\n            }}\n              onBeforeChange={(editor, data, html) => {\n                this.setState({ html }, () => this.syncUpdates());\n              }}\n          />\n          </div>\n        <section className=\"result\" id=\"iframe\">\n          <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n        </section>\n        </div>\n      </React.Fragment>\n    );\n  }\n\n}"]},"metadata":{},"sourceType":"module"}