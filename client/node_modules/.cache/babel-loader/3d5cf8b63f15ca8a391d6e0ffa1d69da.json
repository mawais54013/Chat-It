{"ast":null,"code":"import _classCallCheck from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/muhammadawais/Desktop/Chat-It/client/src/pages/Home.js\";\n// import React from \"react\";\n// import { Link } from \"react-router-dom\";\n// import Header from \"../Components/header\";\n// import rand from \"random-key\";\n// import { database } from \"firebase\";\n// import \"./home.css\";\n// export default class HomePage extends React.Component {\n//   state = {\n//     key: rand.generate(5),\n//     num: null\n//   };\n//   componentDidMount = () => {\n//     database()\n//       .ref(\"code-sessions\")\n//       .on(\"value\", s => {\n//         this.setState({ num: s.numChildren() });\n//       });\n//   };\n//   onNewGround = () => {\n//     database()\n//       .ref(\"code-sessions/\" + this.state.key)\n//       .set({\n//         content: \"Happy Coding\",\n//         createdon: Date()\n//       });\n//     this.props.history.push(\"/\" + this.state.key);\n//   };\n//   render() {\n//     return (\n//       <React.Fragment>\n//         <Header\n//           extras={this.state.num ? `Total ${this.state.num}+ Shares` : null}\n//         />\n//         <div className=\"homepage\">\n//           <p className=\"title\">\n//             <br />\n//             Share Code within <span className=\"highlight\">Realtime</span>.\n//             <br />\n//             Anywhere, Anytime and with <span className=\"highlight\">Anyone</span>\n//             .\n//           </p>\n//           <p className=\"sub-title\">\n//             Simple Realtime Code Sharing Editor App. Using Firebase Realtime\n//             Database and Code Mirror as Editor.\n//           </p>\n//           <div>\n//             <button className=\"btn\" onClick={this.onNewGround}>\n//               Share Code\n//             </button>\n//           </div>\n//         </div>\n//       </React.Fragment>\n//     );\n//   }\n// }\nimport React, { Component } from \"react\";\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.createOffer = function () {\n      console.log('offer');\n\n      _this.pc.createOffer({\n        offerToReceiveVideo: 1\n      }).then(function (sdp) {\n        console.log(JSON.stringify(sdp));\n\n        _this.pc.setLocalDescription(sdp);\n      }, function (e) {});\n    };\n\n    _this.localVideoref = React.createRef();\n    _this.remoteVideoref = React.createRef();\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var pc_config = null;\n      this.pc = new RTCPeerConnection(pc_config);\n\n      this.pc.onicecandidate = function (e) {\n        if (e.candidate) console.log(JSON.stringify(e.candidate));\n      };\n\n      this.pc.oniceconnectionstatechange = function (e) {\n        console.log(e);\n      };\n\n      this.pc.onaddstream = function (e) {\n        _this2.remoteVideoref.current.srcObject = e.stream;\n      };\n\n      var constraints = {\n        video: true,\n        audio: true\n      };\n\n      var success = function success(stream) {\n        window.localStream = stream;\n        _this2.localVideoref.current.srcObject = stream;\n\n        _this2.pc.addStream(stream);\n      };\n\n      var failure = function failure(e) {\n        console.log('getUserMedia Error: ', e);\n      };\n\n      navigator.mediaDevices.getUserMedia(constraints).then(success).catch(failure);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"video\", {\n        style: {\n          width: 240,\n          height: 240,\n          margin: 5,\n          backgroundColor: 'black '\n        },\n        ref: this.localVideoref,\n        autoPlay: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), React.createElement(\"video\", {\n        style: {\n          width: 240,\n          height: 240,\n          margin: 5,\n          backgroundColor: 'black '\n        },\n        ref: this.remoteVideoref,\n        autoPlay: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.createOffer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Offer\"), React.createElement(\"button\", {\n        onClick: this.createAnswer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Answer\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }), React.createElement(\"textarea\", {\n        ref: function ref(_ref) {\n          _this3.textref = _ref;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.setRemoteDescription,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Set Remote Desc\"), React.createElement(\"button\", {\n        onClick: this.addCandidate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Add candiate\"));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/muhammadawais/Desktop/Chat-It/client/src/pages/Home.js"],"names":["React","Component","Home","props","createOffer","console","log","pc","offerToReceiveVideo","then","sdp","JSON","stringify","setLocalDescription","e","localVideoref","createRef","remoteVideoref","pc_config","RTCPeerConnection","onicecandidate","candidate","oniceconnectionstatechange","onaddstream","current","srcObject","stream","constraints","video","audio","success","window","localStream","addStream","failure","navigator","mediaDevices","getUserMedia","catch","width","height","margin","backgroundColor","createAnswer","ref","textref","setRemoteDescription","addCandidate"],"mappings":"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","sourcesContent":["// import React from \"react\";\n// import { Link } from \"react-router-dom\";\n// import Header from \"../Components/header\";\n// import rand from \"random-key\";\n// import { database } from \"firebase\";\n// import \"./home.css\";\n\n\n// export default class HomePage extends React.Component {\n  \n//   state = {\n//     key: rand.generate(5),\n//     num: null\n//   };\n//   componentDidMount = () => {\n//     database()\n//       .ref(\"code-sessions\")\n//       .on(\"value\", s => {\n//         this.setState({ num: s.numChildren() });\n//       });\n//   };\n\n//   onNewGround = () => {\n//     database()\n//       .ref(\"code-sessions/\" + this.state.key)\n//       .set({\n//         content: \"Happy Coding\",\n//         createdon: Date()\n//       });\n//     this.props.history.push(\"/\" + this.state.key);\n//   };\n//   render() {\n    \n//     return (\n//       <React.Fragment>\n//         <Header\n//           extras={this.state.num ? `Total ${this.state.num}+ Shares` : null}\n//         />\n//         <div className=\"homepage\">\n//           <p className=\"title\">\n//             <br />\n//             Share Code within <span className=\"highlight\">Realtime</span>.\n//             <br />\n//             Anywhere, Anytime and with <span className=\"highlight\">Anyone</span>\n//             .\n//           </p>\n\n//           <p className=\"sub-title\">\n//             Simple Realtime Code Sharing Editor App. Using Firebase Realtime\n//             Database and Code Mirror as Editor.\n//           </p>\n//           <div>\n//             <button className=\"btn\" onClick={this.onNewGround}>\n//               Share Code\n//             </button>\n//           </div>\n//         </div>\n//       </React.Fragment>\n//     );\n//   }\n// }\n\nimport React, { Component } from \"react\";\n\nclass Home extends Component {\n  constructor(props) {\n    super(props)\n\n    this.localVideoref = React.createRef();\n    this.remoteVideoref = React.createRef();\n  }\n\n  componentDidMount() {\n    const pc_config = null\n\n    this.pc = new RTCPeerConnection(pc_config)\n\n    this.pc.onicecandidate = (e) => {\n      if(e.candidate) console.log(JSON.stringify(e.candidate))\n    }\n\n    this.pc.oniceconnectionstatechange = (e) => {\n      console.log(e)\n    }\n\n    this.pc.onaddstream = (e) => {\n      this.remoteVideoref.current.srcObject = e.stream;\n    }\n\n    const constraints = { video: true, audio: true }\n\n    const success = (stream) => {\n      window.localStream = stream;\n      this.localVideoref.current.srcObject = stream;\n      this.pc.addStream(stream)\n    }\n\n    const failure = (e) => {\n      console.log('getUserMedia Error: ', e);\n    }\n\n    navigator.mediaDevices.getUserMedia( constraints )\n    .then( success )\n    .catch( failure )\n  }\n\n  createOffer = () => {\n    console.log('offer')\n    this.pc.createOffer({offerToReceiveVideo: 1})\n      .then(sdp => {\n        console.log(JSON.stringify(sdp))\n        this.pc.setLocalDescription(sdp)\n      }, e => {})\n  }\n\n  render() {\n    \n    return (\n      <div>\n        <video style = {{width: 240, height: 240, margin: 5, backgroundColor: 'black '}} ref={this.localVideoref} autoPlay></video>\n        <video style = {{width: 240, height: 240, margin: 5, backgroundColor: 'black '}} ref={this.remoteVideoref} autoPlay></video>\n     \n        <button onClick={this.createOffer}>Offer</button>\n        <button onClick={this.createAnswer}>Answer</button>\n        <br />\n        <textarea ref={ref => { this.textref = ref }}/>\n        <br />\n        <button onClick={this.setRemoteDescription}>Set Remote Desc</button>\n        <button onClick={this.addCandidate}>Add candiate</button>\n      </div>\n    );\n  }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}