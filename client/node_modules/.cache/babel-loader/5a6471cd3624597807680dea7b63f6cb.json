{"ast":null,"code":"import _objectSpread from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/muhammadawais/Desktop/Chat-It/client/src/pages/Coding.js\";\n// import React, { Component } from \"react\";\n// import { Controlled as CodeMirror } from \"react-codemirror2\";\n// import Pusher from \"pusher-js\";\n// import pushid from \"pushid\";\n// import axios from \"axios\";\n// import io from 'socket.io-client'\n// // import \"./App.css\";\n// import \"codemirror/lib/codemirror.css\";\n// import \"codemirror/theme/material.css\";\n// import \"codemirror/mode/htmlmixed/htmlmixed\";\n// import \"codemirror/mode/css/css\";\n// import \"codemirror/mode/javascript/javascript\";\n// class CodingPage extends Component {\n//   constructor() {\n//     super();\n//     this.state = {\n//       id: \"\",\n//       html: \"\",\n//       css: \"\",\n//       js: \"\",\n//       key1: localStorage.getItem('mainKey'),\n//       key: sessionStorage.getItem(\"mainKey\")\n//     };\n//     this.pusher = new Pusher(\"0309639b3bc0d2427a18\", {\n//       cluster: \"us3\",\n//       forceTLS: false\n//     });\n//     this.channel = this.pusher.subscribe(`1`);\n//   }\n//   componentDidUpdate() {\n//     this.runCode();\n//   }\n//   componentDidMount() {\n//     this.setState({\n//       id: pushid()\n//     });\n//     this.channel.bind(`${this.state.key1}`, data => {\n//       const { id } = this.state;\n//       if (data.id === id) return;\n//       this.setState({\n//         html: data.html,\n//         css: data.css,\n//         js: data.js,\n//         name: this.state.key\n//       });\n//     });\n//   }\n// syncUpdates = () => {\n//   const data = { ...this.state };\n//   // axios\n//   //   .post(\"http://localhost:5000/update-editor/\" + `${this.state.key1}`, data)\n//   //   .then(function (res)\n//   //   {\n//   //     console.log(res);\n//   //   })\n//   //   .catch(console.error);\n// };\n// runCode = () => {\n//   const { html, css, js } = this.state;\n//   const iframe = this.refs.iframe;\n//   const document = iframe.contentDocument;\n//   const documentContents = `\n//     <!DOCTYPE html>\n//     <html lang=\"en\">\n//     <head>\n//       <meta charset=\"UTF-8\">\n//       <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n//       <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n//       <title>Document</title>\n//       <style>\n//         ${css}\n//       </style>\n//     </head>\n//     <body>\n//       ${html}\n//       <script type=\"text/javascript\">\n//         ${js}\n//       </script>\n//     </body>\n//     </html>\n//   `;\n//   document.open();\n//   document.write(documentContents);\n//   document.close();\n// };\n// render() {\n//   console.log(this.state.key1)\n//   const { html, js, css } = this.state;\n//   const codeMirrorOptions = {\n//     theme: \"material\",\n//     lineNumbers: true,\n//     scrollbarStyle: null,\n//     lineWrapping: true\n//   };\n//   return (\n//     <div className=\"App\">\n//       <section className=\"playground\">\n// <div className=\"code-editor html-code\">\n//   <div className=\"editor-header\">HTML</div>\n//   <CodeMirror\n//     value={html}\n//     options={{\n//       mode: \"htmlmixed\",\n//       ...codeMirrorOptions\n//     }}\n//     onBeforeChange={(editor, data, html) => {\n//       this.setState({ html }, () => this.syncUpdates());\n//     }}\n//   />\n// </div>\n// <div className=\"code-editor css-code\">\n//   <div className=\"editor-header\">CSS</div>\n//   <CodeMirror\n//     value={css}\n//     options={{\n//       mode: \"css\",\n//       ...codeMirrorOptions\n//     }}\n//     onBeforeChange={(editor, data, css) => {\n//       this.setState({ css }, () => this.syncUpdates());\n//     }}\n//   />\n// </div>\n// <div className=\"code-editor js-code\">\n//   <div className=\"editor-header\">JavaScript</div>\n//   <CodeMirror\n//     value={js}\n//     options={{\n//       mode: \"javascript\",\n//       ...codeMirrorOptions\n//     }}\n//     onBeforeChange={(editor, data, js) => {\n//       this.setState({ js }, () => this.syncUpdates());\n//     }}\n//   />\n// </div>\n//       </section>\n//       <section className=\"result\">\n//         <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n//       </section>\n//     </div>\n//   );\n// }\n// }\n// export default CodingPage;\nimport React from \"react\";\nimport Header from \"../Components/header\";\nimport { database } from \"firebase\";\nimport CodeMirror from \"react-codemirror\"; // import { Controlled as CodeMirror } from \"react-codemirror2\";\n\nrequire(\"codemirror/lib/codemirror.css\");\n\nrequire(\"codemirror/mode/javascript/javascript\");\n\nrequire(\"codemirror/theme/dracula.css\");\n\nvar CodingPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(CodingPage, _React$Component);\n\n  function CodingPage() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CodingPage);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CodingPage)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      code: \"Loading...\",\n      cursorPosition: {\n        line: 0,\n        ch: 0\n      }\n    };\n\n    _this.componentDidMount = function () {\n      _this.runCode();\n\n      var params = _this.props.match.params;\n\n      var self = _assertThisInitialized(_assertThisInitialized(_this));\n\n      database().ref(\"/code-sessions/\" + params.sessionid).once(\"value\").then(function (snapshot) {\n        self.setState({\n          code: snapshot.val().content + \"\",\n          createdon: snapshot.val().createdon\n        }, function () {\n          var content = snapshot.val().content;\n          self.codemirror.getCodeMirror().setValue(content);\n        });\n        _this.codeRef = database().ref(\"code-sessions/\" + params.sessionid);\n\n        _this.codeRef.on(\"value\", function (snapshot) {\n          self.setState({\n            code: snapshot.val().content\n          });\n          var currentCursorPos = self.state.cursorPosition;\n          self.codemirror.getCodeMirror().setValue(snapshot.val().content);\n          self.setState({\n            cursorPosition: currentCursorPos\n          });\n          self.changeCursorPos();\n        });\n      }).catch(function (e) {\n        self.codemirror.getCodeMirror().setValue(\"No Sessions Found!\");\n      });\n    };\n\n    _this.changeCursorPos = function () {\n      var _this$state$cursorPos = _this.state.cursorPosition,\n          line = _this$state$cursorPos.line,\n          ch = _this$state$cursorPos.ch;\n\n      _this.codemirror.getCodeMirror().doc.setCursor(line, ch);\n    };\n\n    _this.onChange = function (newVal, change) {\n      // console.log(newVal, change);\n      _this.setState({\n        cursorPosition: {\n          line: _this.codemirror.getCodeMirror().doc.getCursor().line,\n          ch: _this.codemirror.getCodeMirror().doc.getCursor().ch\n        }\n      }, function () {});\n\n      _this.codeRef.child(\"content\").set(newVal);\n    };\n\n    _this.syncUpdates = function () {\n      var data = _objectSpread({}, _this.state); // axios\n      //   .post(\"http://localhost:3000/update-editor/\" + `${this.state.key1}`, data)\n      //   .then(function (res)\n      //   {\n      //     console.log(res);\n      //   })\n      //   .catch(console.error);\n\n    };\n\n    _this.runCode = function () {\n      var _this$state = _this.state,\n          html = _this$state.html,\n          css = _this$state.css,\n          js = _this$state.js;\n      var iframe = _this.refs.iframe;\n      var document = iframe.contentDocument;\n      var documentContents = \"\\n      <!DOCTYPE html>\\n      <html lang=\\\"en\\\">\\n      <head>\\n        <meta charset=\\\"UTF-8\\\">\\n        <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n        <meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"ie=edge\\\">\\n        <title>Document</title>\\n        <style>\\n          \".concat(css, \"\\n        </style>\\n      </head>\\n      <body>\\n        \").concat(html, \"\\n\\n        <script type=\\\"text/javascript\\\">\\n          \").concat(js, \"\\n        </script>\\n      </body>\\n      </html>\\n    \");\n      document.open();\n      document.write(documentContents);\n      document.close();\n    };\n\n    return _this;\n  }\n\n  _createClass(CodingPage, [{\n    key: \"render\",\n    // render() {\n    //   return (\n    //     <React.Fragment>\n    //       <Header\n    //         style={{ background: \"#1d1f27\" }}\n    //         extras={\n    //           <div>\n    //             {this.state.createdon\n    //               ? `Created On: ${this.state.createdon}`\n    //               : \"\"}\n    //           </div>\n    //         }\n    //       />\n    //       <div className=\"coding-page\">\n    //         <CodeMirror\n    //           ref={r => (this.codemirror = r)}\n    //           className=\"code-mirror-container\"\n    //           value={this.state.code}\n    //           onChange={this.onChange}\n    //           options={{\n    //             theme: \"dracula\",\n    //             lineNumbers: true,\n    //             readOnly: false,\n    //             mode: \"javascript\"\n    //           }}\n    //         />\n    //         <section className=\"result\">\n    //            <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n    //         </section>\n    //       </div>\n    //     </React.Fragment>\n    //   );\n    // }\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.state.key1);\n      var _this$state2 = this.state,\n          html = _this$state2.html,\n          js = _this$state2.js,\n          css = _this$state2.css;\n      var codeMirrorOptions = {\n        theme: \"material\",\n        lineNumbers: true,\n        scrollbarStyle: null,\n        lineWrapping: true\n      };\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"playground\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"code-editor html-code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"editor-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, \"HTML\"), React.createElement(CodeMirror, {\n        value: html,\n        options: _objectSpread({\n          mode: \"htmlmixed\"\n        }, codeMirrorOptions),\n        onBeforeChange: function onBeforeChange(editor, data, html) {\n          _this2.setState({\n            html: html\n          }, function () {\n            return _this2.syncUpdates();\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"code-editor css-code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"editor-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345\n        },\n        __self: this\n      }, \"CSS\"), React.createElement(CodeMirror, {\n        value: css,\n        options: _objectSpread({\n          mode: \"css\"\n        }, codeMirrorOptions),\n        onBeforeChange: function onBeforeChange(editor, data, css) {\n          _this2.setState({\n            css: css\n          }, function () {\n            return _this2.syncUpdates();\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"code-editor js-code\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"editor-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358\n        },\n        __self: this\n      }, \"JavaScript\"), React.createElement(CodeMirror, {\n        value: js,\n        ref: function ref(r) {\n          return _this2.codemirror = r;\n        },\n        className: \"code-mirror-container\",\n        options: _objectSpread({\n          mode: \"javascript\"\n        }, codeMirrorOptions),\n        onBeforeChange: function onBeforeChange(editor, data, js) {\n          _this2.setState({\n            js: js\n          }, function () {\n            return _this2.syncUpdates();\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359\n        },\n        __self: this\n      }))), React.createElement(\"section\", {\n        className: \"result\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373\n        },\n        __self: this\n      }, React.createElement(\"iframe\", {\n        title: \"result\",\n        className: \"iframe\",\n        ref: \"iframe\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 374\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return CodingPage;\n}(React.Component);\n\nexport { CodingPage as default };","map":{"version":3,"sources":["/Users/muhammadawais/Desktop/Chat-It/client/src/pages/Coding.js"],"names":["React","Header","database","CodeMirror","require","CodingPage","state","code","cursorPosition","line","ch","componentDidMount","runCode","params","props","match","self","ref","sessionid","once","then","snapshot","setState","val","content","createdon","codemirror","getCodeMirror","setValue","codeRef","on","currentCursorPos","changeCursorPos","catch","e","doc","setCursor","onChange","newVal","change","getCursor","child","set","syncUpdates","data","html","css","js","iframe","refs","document","contentDocument","documentContents","open","write","close","console","log","key1","codeMirrorOptions","theme","lineNumbers","scrollbarStyle","lineWrapping","mode","editor","r","Component"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEE;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACQ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACF;AAEA;AAIA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,QAAT,QAAyB,UAAzB;AACA,OAAOC,UAAP,MAAuB,kBAAvB,C,CACA;;AAEAC,OAAO,CAAC,+BAAD,CAAP;;AACAA,OAAO,CAAC,uCAAD,CAAP;;AACAA,OAAO,CAAC,8BAAD,CAAP;;IAEqBC,U;;;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNC,MAAAA,IAAI,EAAE,YADA;AAENC,MAAAA,cAAc,EAAE;AACdC,QAAAA,IAAI,EAAE,CADQ;AAEdC,QAAAA,EAAE,EAAE;AAFU;AAFV,K;;UAORC,iB,GAAoB,YAAM;AACxB,YAAKC,OAAL;;AADwB,UAEhBC,MAFgB,GAEL,MAAKC,KAAL,CAAWC,KAFN,CAEhBF,MAFgB;;AAGxB,UAAIG,I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","sourcesContent":["// import React, { Component } from \"react\";\n// import { Controlled as CodeMirror } from \"react-codemirror2\";\n// import Pusher from \"pusher-js\";\n// import pushid from \"pushid\";\n// import axios from \"axios\";\n// import io from 'socket.io-client'\n\n// // import \"./App.css\";\n// import \"codemirror/lib/codemirror.css\";\n// import \"codemirror/theme/material.css\";\n\n// import \"codemirror/mode/htmlmixed/htmlmixed\";\n// import \"codemirror/mode/css/css\";\n// import \"codemirror/mode/javascript/javascript\";\n\n\n// class CodingPage extends Component {\n//   constructor() {\n\n\n//     super();\n//     this.state = {\n//       id: \"\",\n//       html: \"\",\n//       css: \"\",\n//       js: \"\",\n//       key1: localStorage.getItem('mainKey'),\n//       key: sessionStorage.getItem(\"mainKey\")\n//     };\n\n//     this.pusher = new Pusher(\"0309639b3bc0d2427a18\", {\n//       cluster: \"us3\",\n//       forceTLS: false\n//     });\n\n//     this.channel = this.pusher.subscribe(`1`);\n//   }\n\n//   componentDidUpdate() {\n//     this.runCode();\n//   }\n\n//   componentDidMount() {\n//     this.setState({\n//       id: pushid()\n//     });\n\n//     this.channel.bind(`${this.state.key1}`, data => {\n//       const { id } = this.state;\n//       if (data.id === id) return;\n\n//       this.setState({\n//         html: data.html,\n//         css: data.css,\n//         js: data.js,\n//         name: this.state.key\n//       });\n//     });\n//   }\n\n  // syncUpdates = () => {\n  //   const data = { ...this.state };\n\n  //   // axios\n  //   //   .post(\"http://localhost:5000/update-editor/\" + `${this.state.key1}`, data)\n\n  //   //   .then(function (res)\n  //   //   {\n  //   //     console.log(res);\n  //   //   })\n  //   //   .catch(console.error);\n      \n  // };\n\n  // runCode = () => {\n  //   const { html, css, js } = this.state;\n\n  //   const iframe = this.refs.iframe;\n  //   const document = iframe.contentDocument;\n  //   const documentContents = `\n  //     <!DOCTYPE html>\n  //     <html lang=\"en\">\n  //     <head>\n  //       <meta charset=\"UTF-8\">\n  //       <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  //       <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n  //       <title>Document</title>\n  //       <style>\n  //         ${css}\n  //       </style>\n  //     </head>\n  //     <body>\n  //       ${html}\n\n  //       <script type=\"text/javascript\">\n  //         ${js}\n  //       </script>\n  //     </body>\n  //     </html>\n  //   `;\n\n  //   document.open();\n  //   document.write(documentContents);\n  //   document.close();\n  // };\n\n  // render() {\n\n  //   console.log(this.state.key1)\n  //   const { html, js, css } = this.state;\n  //   const codeMirrorOptions = {\n  //     theme: \"material\",\n  //     lineNumbers: true,\n  //     scrollbarStyle: null,\n  //     lineWrapping: true\n  //   };\n\n  //   return (\n  //     <div className=\"App\">\n  //       <section className=\"playground\">\n          // <div className=\"code-editor html-code\">\n          //   <div className=\"editor-header\">HTML</div>\n          //   <CodeMirror\n          //     value={html}\n          //     options={{\n          //       mode: \"htmlmixed\",\n          //       ...codeMirrorOptions\n          //     }}\n          //     onBeforeChange={(editor, data, html) => {\n          //       this.setState({ html }, () => this.syncUpdates());\n          //     }}\n          //   />\n          // </div>\n          // <div className=\"code-editor css-code\">\n          //   <div className=\"editor-header\">CSS</div>\n          //   <CodeMirror\n          //     value={css}\n          //     options={{\n          //       mode: \"css\",\n          //       ...codeMirrorOptions\n          //     }}\n          //     onBeforeChange={(editor, data, css) => {\n          //       this.setState({ css }, () => this.syncUpdates());\n          //     }}\n          //   />\n          // </div>\n          // <div className=\"code-editor js-code\">\n          //   <div className=\"editor-header\">JavaScript</div>\n          //   <CodeMirror\n          //     value={js}\n          //     options={{\n          //       mode: \"javascript\",\n          //       ...codeMirrorOptions\n          //     }}\n          //     onBeforeChange={(editor, data, js) => {\n          //       this.setState({ js }, () => this.syncUpdates());\n          //     }}\n          //   />\n          // </div>\n  //       </section>\n  //       <section className=\"result\">\n  //         <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n  //       </section>\n  //     </div>\n  //   );\n  // }\n// }\n\n// export default CodingPage;\n\n\n    \nimport React from \"react\";\nimport Header from \"../Components/header\";\nimport { database } from \"firebase\";\nimport CodeMirror from \"react-codemirror\";\n// import { Controlled as CodeMirror } from \"react-codemirror2\";\n\nrequire(\"codemirror/lib/codemirror.css\");\nrequire(\"codemirror/mode/javascript/javascript\");\nrequire(\"codemirror/theme/dracula.css\");\n\nexport default class CodingPage extends React.Component {\n  state = {\n    code: \"Loading...\",\n    cursorPosition: {\n      line: 0,\n      ch: 0\n    }\n  };\n  componentDidMount = () => {\n    this.runCode();\n    const { params } = this.props.match;\n    let self = this;\n    database()\n      .ref(\"/code-sessions/\" + params.sessionid)\n      .once(\"value\")\n      .then(snapshot => {\n        self.setState({ code: snapshot.val().content + \"\", createdon: snapshot.val().createdon }, () => {\n          let content = snapshot.val().content;\n\n          self.codemirror.getCodeMirror().setValue(content);\n        });\n        this.codeRef = database().ref(\"code-sessions/\" + params.sessionid);\n        this.codeRef.on(\"value\", function(snapshot) {\n          self.setState({\n            code: snapshot.val().content\n          });\n          var currentCursorPos = self.state.cursorPosition;\n          self.codemirror.getCodeMirror().setValue(snapshot.val().content);\n          self.setState({ cursorPosition: currentCursorPos });\n          self.changeCursorPos();\n        });\n      })\n      .catch(e => {\n        self.codemirror.getCodeMirror().setValue(\"No Sessions Found!\");\n      });\n  };\n  changeCursorPos = () => {\n    const { line, ch } = this.state.cursorPosition;\n    this.codemirror.getCodeMirror().doc.setCursor(line, ch);\n  };\n  onChange = (newVal, change) => {\n    // console.log(newVal, change);\n    this.setState(\n      {\n        cursorPosition: {\n          line: this.codemirror.getCodeMirror().doc.getCursor().line,\n          ch: this.codemirror.getCodeMirror().doc.getCursor().ch\n        }\n      },\n      () => {}\n    );\n    this.codeRef.child(\"content\").set(newVal);\n  };\n\n  syncUpdates = () => {\n    const data = { ...this.state };\n\n    // axios\n    //   .post(\"http://localhost:3000/update-editor/\" + `${this.state.key1}`, data)\n\n    //   .then(function (res)\n    //   {\n    //     console.log(res);\n    //   })\n    //   .catch(console.error);\n      \n  };\n\n  runCode = () => {\n    const { html, css, js } = this.state;\n\n    const iframe = this.refs.iframe;\n    const document = iframe.contentDocument;\n    const documentContents = `\n      <!DOCTYPE html>\n      <html lang=\"en\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n        <title>Document</title>\n        <style>\n          ${css}\n        </style>\n      </head>\n      <body>\n        ${html}\n\n        <script type=\"text/javascript\">\n          ${js}\n        </script>\n      </body>\n      </html>\n    `;\n\n    document.open();\n    document.write(documentContents);\n    document.close();\n  };\n\n  // render() {\n  //   return (\n  //     <React.Fragment>\n  //       <Header\n  //         style={{ background: \"#1d1f27\" }}\n  //         extras={\n  //           <div>\n  //             {this.state.createdon\n  //               ? `Created On: ${this.state.createdon}`\n  //               : \"\"}\n  //           </div>\n  //         }\n  //       />\n  //       <div className=\"coding-page\">\n  //         <CodeMirror\n  //           ref={r => (this.codemirror = r)}\n  //           className=\"code-mirror-container\"\n  //           value={this.state.code}\n  //           onChange={this.onChange}\n  //           options={{\n  //             theme: \"dracula\",\n  //             lineNumbers: true,\n  //             readOnly: false,\n  //             mode: \"javascript\"\n  //           }}\n  //         />\n  //         <section className=\"result\">\n  //            <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n  //         </section>\n  //       </div>\n  //     </React.Fragment>\n  //   );\n  // }\n\n  render() {\n\n    console.log(this.state.key1)\n    const { html, js, css } = this.state;\n    const codeMirrorOptions = {\n      theme: \"material\",\n      lineNumbers: true,\n      scrollbarStyle: null,\n      lineWrapping: true\n    };\n\n    return (\n      <div className=\"App\">\n        <section className=\"playground\">\n                  <div className=\"code-editor html-code\">\n            <div className=\"editor-header\">HTML</div>\n            <CodeMirror\n              value={html}\n              options={{\n                mode: \"htmlmixed\",\n                ...codeMirrorOptions\n              }}\n              onBeforeChange={(editor, data, html) => {\n                this.setState({ html }, () => this.syncUpdates());\n              }}\n            />\n          </div>\n          <div className=\"code-editor css-code\">\n            <div className=\"editor-header\">CSS</div>\n            <CodeMirror\n              value={css}\n              options={{\n                mode: \"css\",\n                ...codeMirrorOptions\n              }}\n              onBeforeChange={(editor, data, css) => {\n                this.setState({ css }, () => this.syncUpdates());\n              }}\n            />\n          </div>\n          <div className=\"code-editor js-code\">\n            <div className=\"editor-header\">JavaScript</div>\n            <CodeMirror\n              value={js}\n              ref={r => (this.codemirror = r)}\n              className=\"code-mirror-container\"\n              options={{\n                mode: \"javascript\",\n                ...codeMirrorOptions\n              }}\n              onBeforeChange={(editor, data, js) => {\n                this.setState({ js }, () => this.syncUpdates());\n              }}\n            />\n          </div>\n        </section>\n        <section className=\"result\">\n          <iframe title=\"result\" className=\"iframe\" ref=\"iframe\" />\n        </section>\n      </div>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}