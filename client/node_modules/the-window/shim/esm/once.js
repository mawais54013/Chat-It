/**
 * Handle event once on document
 * @function once
 * @param {string} event - Name of event
 * @param {function} handler - Event handler
 */
'use strict';

import get from './get';

var debug = require('debug')('the:window:once');
/** @lends once */


function once(event, handler) {
  var document = get('window.document');

  if (!document) {
    return;
  }

  var handlerWrap = function handlerWrap() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    debug('handle', event, [].concat(args));
    handler.apply(void 0, args);
    debug('remove', event);
    document.removeEventListener(event, handlerWrap);
  };

  debug('add', event);
  document.addEventListener(event, handlerWrap);
}

export default once;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9uY2UuanMiXSwibmFtZXMiOlsiZ2V0IiwiZGVidWciLCJyZXF1aXJlIiwib25jZSIsImV2ZW50IiwiaGFuZGxlciIsImRvY3VtZW50IiwiaGFuZGxlcldyYXAiLCJhcmdzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7QUFNQTs7QUFFQSxPQUFPQSxHQUFQLE1BQWdCLE9BQWhCOztBQUNBLElBQU1DLEtBQUssR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBUCxDQUFpQixpQkFBakIsQ0FBZDtBQUVBOzs7QUFDQSxTQUFTQyxJQUFULENBQWNDLEtBQWQsRUFBcUJDLE9BQXJCLEVBQThCO0FBQzVCLE1BQU1DLFFBQVEsR0FBR04sR0FBRyxDQUFDLGlCQUFELENBQXBCOztBQUNBLE1BQUksQ0FBQ00sUUFBTCxFQUFlO0FBQ2I7QUFDRDs7QUFDRCxNQUFNQyxXQUFXLEdBQUcsU0FBZEEsV0FBYyxHQUFhO0FBQUEsc0NBQVRDLElBQVM7QUFBVEEsTUFBQUEsSUFBUztBQUFBOztBQUMvQlAsSUFBQUEsS0FBSyxDQUFDLFFBQUQsRUFBV0csS0FBWCxZQUFzQkksSUFBdEIsRUFBTDtBQUNBSCxJQUFBQSxPQUFPLE1BQVAsU0FBV0csSUFBWDtBQUNBUCxJQUFBQSxLQUFLLENBQUMsUUFBRCxFQUFXRyxLQUFYLENBQUw7QUFDQUUsSUFBQUEsUUFBUSxDQUFDRyxtQkFBVCxDQUE2QkwsS0FBN0IsRUFBb0NHLFdBQXBDO0FBQ0QsR0FMRDs7QUFNQU4sRUFBQUEsS0FBSyxDQUFDLEtBQUQsRUFBUUcsS0FBUixDQUFMO0FBQ0FFLEVBQUFBLFFBQVEsQ0FBQ0ksZ0JBQVQsQ0FBMEJOLEtBQTFCLEVBQWlDRyxXQUFqQztBQUNEOztBQUVELGVBQWVKLElBQWYiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIYW5kbGUgZXZlbnQgb25jZSBvbiBkb2N1bWVudFxuICogQGZ1bmN0aW9uIG9uY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudCAtIE5hbWUgb2YgZXZlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIgLSBFdmVudCBoYW5kbGVyXG4gKi9cbid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgZ2V0IGZyb20gJy4vZ2V0JztcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgndGhlOndpbmRvdzpvbmNlJylcblxuLyoqIEBsZW5kcyBvbmNlICovXG5mdW5jdGlvbiBvbmNlKGV2ZW50LCBoYW5kbGVyKSB7XG4gIGNvbnN0IGRvY3VtZW50ID0gZ2V0KCd3aW5kb3cuZG9jdW1lbnQnKVxuICBpZiAoIWRvY3VtZW50KSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgY29uc3QgaGFuZGxlcldyYXAgPSAoLi4uYXJncykgPT4ge1xuICAgIGRlYnVnKCdoYW5kbGUnLCBldmVudCwgWy4uLmFyZ3NdKVxuICAgIGhhbmRsZXIoLi4uYXJncylcbiAgICBkZWJ1ZygncmVtb3ZlJywgZXZlbnQpXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgaGFuZGxlcldyYXApXG4gIH1cbiAgZGVidWcoJ2FkZCcsIGV2ZW50KVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyV3JhcClcbn1cblxuZXhwb3J0IGRlZmF1bHQgb25jZTtcbiJdfQ==