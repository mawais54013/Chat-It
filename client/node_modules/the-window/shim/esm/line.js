/**
 * Handle toggle online/offline
 * @function line
 * @param {function} handler - Event handler
 * @param {Object} [options={}] - Optional settings
 * @param {number} [options.delay=100] Delay for callback
 */
'use strict';

import debug from 'debug';
import get from './get';
/** @lends line */

function line(handler) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var _options$delay = options.delay,
      delay = _options$delay === void 0 ? 100 : _options$delay;
  var window = get('window');

  if (!window) {
    return;
  }

  var handlerWrap = function handlerWrap(connected) {
    debug('onLine', connected);
    clearTimeout(handlerWrap._handleCallTimer);
    handlerWrap._handleCallTimer = setTimeout(function () {
      handler(connected);
    }, delay);
  };

  window.addEventListener('offline', function () {
    return handlerWrap(false);
  });
  window.addEventListener('online', function () {
    return handlerWrap(true);
  });
  handlerWrap(get('navigator.onLine'));
}

export default line;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpbmUuanMiXSwibmFtZXMiOlsiZGVidWciLCJnZXQiLCJsaW5lIiwiaGFuZGxlciIsIm9wdGlvbnMiLCJkZWxheSIsIndpbmRvdyIsImhhbmRsZXJXcmFwIiwiY29ubmVjdGVkIiwiY2xlYXJUaW1lb3V0IiwiX2hhbmRsZUNhbGxUaW1lciIsInNldFRpbWVvdXQiLCJhZGRFdmVudExpc3RlbmVyIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQU9BOztBQUVBLE9BQU9BLEtBQVAsTUFBa0IsT0FBbEI7QUFDQSxPQUFPQyxHQUFQLE1BQWdCLE9BQWhCO0FBRUE7O0FBQ0EsU0FBU0MsSUFBVCxDQUFjQyxPQUFkLEVBQXFDO0FBQUEsTUFBZEMsT0FBYyx1RUFBSixFQUFJO0FBQUEsdUJBQ1hBLE9BRFcsQ0FDM0JDLEtBRDJCO0FBQUEsTUFDM0JBLEtBRDJCLCtCQUNuQixHQURtQjtBQUVuQyxNQUFNQyxNQUFNLEdBQUdMLEdBQUcsQ0FBQyxRQUFELENBQWxCOztBQUNBLE1BQUksQ0FBQ0ssTUFBTCxFQUFhO0FBQ1g7QUFDRDs7QUFDRCxNQUFNQyxXQUFXLEdBQUcsU0FBZEEsV0FBYyxDQUFDQyxTQUFELEVBQWU7QUFDakNSLElBQUFBLEtBQUssQ0FBQyxRQUFELEVBQVdRLFNBQVgsQ0FBTDtBQUNBQyxJQUFBQSxZQUFZLENBQUNGLFdBQVcsQ0FBQ0csZ0JBQWIsQ0FBWjtBQUNBSCxJQUFBQSxXQUFXLENBQUNHLGdCQUFaLEdBQStCQyxVQUFVLENBQUMsWUFBTTtBQUM5Q1IsTUFBQUEsT0FBTyxDQUFDSyxTQUFELENBQVA7QUFDRCxLQUZ3QyxFQUV0Q0gsS0FGc0MsQ0FBekM7QUFHRCxHQU5EOztBQU9BQyxFQUFBQSxNQUFNLENBQUNNLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DO0FBQUEsV0FBTUwsV0FBVyxDQUFDLEtBQUQsQ0FBakI7QUFBQSxHQUFuQztBQUNBRCxFQUFBQSxNQUFNLENBQUNNLGdCQUFQLENBQXdCLFFBQXhCLEVBQWtDO0FBQUEsV0FBTUwsV0FBVyxDQUFDLElBQUQsQ0FBakI7QUFBQSxHQUFsQztBQUNBQSxFQUFBQSxXQUFXLENBQUNOLEdBQUcsQ0FBQyxrQkFBRCxDQUFKLENBQVg7QUFDRDs7QUFFRCxlQUFlQyxJQUFmIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSGFuZGxlIHRvZ2dsZSBvbmxpbmUvb2ZmbGluZVxuICogQGZ1bmN0aW9uIGxpbmVcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGhhbmRsZXIgLSBFdmVudCBoYW5kbGVyXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIC0gT3B0aW9uYWwgc2V0dGluZ3NcbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0aW9ucy5kZWxheT0xMDBdIERlbGF5IGZvciBjYWxsYmFja1xuICovXG4ndXNlIHN0cmljdCdcblxuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJztcbmltcG9ydCBnZXQgZnJvbSAnLi9nZXQnO1xuXG4vKiogQGxlbmRzIGxpbmUgKi9cbmZ1bmN0aW9uIGxpbmUoaGFuZGxlciwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHsgZGVsYXkgPSAxMDAgfSA9IG9wdGlvbnNcbiAgY29uc3Qgd2luZG93ID0gZ2V0KCd3aW5kb3cnKVxuICBpZiAoIXdpbmRvdykge1xuICAgIHJldHVyblxuICB9XG4gIGNvbnN0IGhhbmRsZXJXcmFwID0gKGNvbm5lY3RlZCkgPT4ge1xuICAgIGRlYnVnKCdvbkxpbmUnLCBjb25uZWN0ZWQpXG4gICAgY2xlYXJUaW1lb3V0KGhhbmRsZXJXcmFwLl9oYW5kbGVDYWxsVGltZXIpXG4gICAgaGFuZGxlcldyYXAuX2hhbmRsZUNhbGxUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaGFuZGxlcihjb25uZWN0ZWQpXG4gICAgfSwgZGVsYXkpXG4gIH1cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCAoKSA9PiBoYW5kbGVyV3JhcChmYWxzZSkpXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCAoKSA9PiBoYW5kbGVyV3JhcCh0cnVlKSlcbiAgaGFuZGxlcldyYXAoZ2V0KCduYXZpZ2F0b3Iub25MaW5lJykpXG59XG5cbmV4cG9ydCBkZWZhdWx0IGxpbmU7XG4iXX0=