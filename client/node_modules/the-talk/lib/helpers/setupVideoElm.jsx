/**
 * @function setupVideoElm
 */
'use strict'

/** @lends setupVideoElm */
async function setupVideoElm (video, options = {}) {
  const { local = false, stream } = options
  if (local) {
    video.setAttribute('muted', '')
  }
  video.setAttribute('playsinline', '')
  video.setAttribute('autoplay', '')
  video.setAttribute('controls', '')
  setTimeout(async () => {
    video.removeAttribute('controls')
    video.srcObject = stream
    if (video.paused) {
      try {
        await video.play()
      } catch (e) {
        // Do nothing
      }
    }
  }, 1)
}

export default setupVideoElm
