{"ast":null,"code":"import _classCallCheck from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/muhammadawais/Desktop/Chat-It/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/muhammadawais/Desktop/Chat-It/client/src/pages/Home.js\";\n// import React from \"react\";\n// import { Link } from \"react-router-dom\";\n// import Header from \"../Components/header\";\n// import rand from \"random-key\";\n// import { database } from \"firebase\";\n// import \"./home.css\";\n// export default class HomePage extends React.Component {\n//   state = {\n//     key: rand.generate(5),\n//     num: null\n//   };\n//   componentDidMount = () => {\n//     database()\n//       .ref(\"code-sessions\")\n//       .on(\"value\", s => {\n//         this.setState({ num: s.numChildren() });\n//       });\n//   };\n//   onNewGround = () => {\n//     database()\n//       .ref(\"code-sessions/\" + this.state.key)\n//       .set({\n//         content: \"Happy Coding\",\n//         createdon: Date()\n//       });\n//     this.props.history.push(\"/\" + this.state.key);\n//   };\n//   render() {\n//     return (\n//       <React.Fragment>\n//         <Header\n//           extras={this.state.num ? `Total ${this.state.num}+ Shares` : null}\n//         />\n//         <div className=\"homepage\">\n//           <p className=\"title\">\n//             <br />\n//             Share Code within <span className=\"highlight\">Realtime</span>.\n//             <br />\n//             Anywhere, Anytime and with <span className=\"highlight\">Anyone</span>\n//             .\n//           </p>\n//           <p className=\"sub-title\">\n//             Simple Realtime Code Sharing Editor App. Using Firebase Realtime\n//             Database and Code Mirror as Editor.\n//           </p>\n//           <div>\n//             <button className=\"btn\" onClick={this.onNewGround}>\n//               Share Code\n//             </button>\n//           </div>\n//         </div>\n//       </React.Fragment>\n//     );\n//   }\n// }\nimport React, { Component } from \"react\";\n\nvar Home =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Home, _Component);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Home).call(this, props));\n\n    _this.createOffer = function () {\n      console.log('offer');\n\n      _this.pc.createOffer({\n        offerToReceiveVideo: 1\n      }).then(function (num) {\n        console.log(num);\n\n        _this.pc.setLocalDescription(num);\n      }, function (e) {});\n    };\n\n    _this.setRemoteDescription = function () {\n      var desc = JSON.parse(_this.textref.value);\n\n      _this.pc.setRemoteDescription(new RTCSessionDescription(desc));\n    };\n\n    _this.createAnswer = function () {\n      console.log('Answer');\n\n      _this.pc.createAnswer({\n        offerToReceiveVideo: 1\n      }).then(function (sdp) {\n        console.log(JSON.stringify(sdp));\n\n        _this.pc.setLocalDescription(sdp);\n      }, function (e) {});\n    };\n\n    _this.addCandidate = function () {\n      var candiate = JSON.parse(_this.textref.value);\n      console.log(\"Adding candidate: \", candiate);\n\n      _this.pc.addIceCandidate(new RTCIceCandidate(candiate));\n    };\n\n    _this.localVideoref = React.createRef();\n    _this.remoteVideoref = React.createRef();\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var pc_config = null;\n      this.pc = new RTCPeerConnection(pc_config);\n\n      this.pc.onicecandidate = function (e) {\n        if (e.candidate) console.log(JSON.stringify(e.candidate));\n      };\n\n      this.pc.oniceconnectionstatechange = function (e) {\n        console.log(e);\n      };\n\n      this.pc.onaddstream = function (e) {\n        _this2.remoteVideoref.current.srcObject = e.stream;\n      };\n\n      var constraints = {\n        video: true // audio: true - to add audio\n\n      };\n\n      var success = function success(stream) {\n        window.localStream = stream;\n        _this2.localVideoref.current.srcObject = stream;\n\n        _this2.pc.addStream(stream);\n      };\n\n      var failure = function failure(e) {\n        console.log('getUserMedia Error: ', e);\n      };\n\n      navigator.mediaDevices.getUserMedia(constraints).then(success).catch(failure);\n    } // createOffer = () => {\n    //   console.log('offer')\n    //   this.pc.createOffer({offerToReceiveVideo: 1})\n    //     .then(sdp => {\n    //       console.log(JSON.stringify(sdp))\n    //       this.pc.setLocalDescription(sdp)\n    //     }, e => {})\n    // }\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"video\", {\n        style: {\n          width: 240,\n          height: 240,\n          margin: 5,\n          backgroundColor: 'black '\n        },\n        ref: this.remoteVideoref,\n        autoPlay: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.createOffer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Offer\"), React.createElement(\"button\", {\n        onClick: this.createAnswer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Answer\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }), React.createElement(\"textarea\", {\n        ref: function ref(_ref) {\n          _this3.textref = _ref;\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.setRemoteDescription,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Set Remote Desc\"), React.createElement(\"button\", {\n        onClick: this.addCandidate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Add candiate\"));\n    }\n  }]);\n\n  return Home;\n}(Component);\n\nexport default Home;","map":{"version":3,"sources":["/Users/muhammadawais/Desktop/Chat-It/client/src/pages/Home.js"],"names":["React","Component","Home","props","createOffer","console","log","pc","offerToReceiveVideo","then","num","setLocalDescription","e","setRemoteDescription","desc","JSON","parse","textref","value","RTCSessionDescription","createAnswer","sdp","stringify","addCandidate","candiate","addIceCandidate","RTCIceCandidate","localVideoref","createRef","remoteVideoref","pc_config","RTCPeerConnection","onicecandidate","candidate","oniceconnectionstatechange","onaddstream","current","srcObject","stream","constraints","video","success","window","localStream","addStream","failure","navigator","mediaDevices","getUserMedia","catch","width","height","margin","backgroundColor","ref"],"mappings":"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","sourcesContent":["// import React from \"react\";\n// import { Link } from \"react-router-dom\";\n// import Header from \"../Components/header\";\n// import rand from \"random-key\";\n// import { database } from \"firebase\";\n// import \"./home.css\";\n\n\n// export default class HomePage extends React.Component {\n  \n//   state = {\n//     key: rand.generate(5),\n//     num: null\n//   };\n//   componentDidMount = () => {\n//     database()\n//       .ref(\"code-sessions\")\n//       .on(\"value\", s => {\n//         this.setState({ num: s.numChildren() });\n//       });\n//   };\n\n//   onNewGround = () => {\n//     database()\n//       .ref(\"code-sessions/\" + this.state.key)\n//       .set({\n//         content: \"Happy Coding\",\n//         createdon: Date()\n//       });\n//     this.props.history.push(\"/\" + this.state.key);\n//   };\n//   render() {\n    \n//     return (\n//       <React.Fragment>\n//         <Header\n//           extras={this.state.num ? `Total ${this.state.num}+ Shares` : null}\n//         />\n//         <div className=\"homepage\">\n//           <p className=\"title\">\n//             <br />\n//             Share Code within <span className=\"highlight\">Realtime</span>.\n//             <br />\n//             Anywhere, Anytime and with <span className=\"highlight\">Anyone</span>\n//             .\n//           </p>\n\n//           <p className=\"sub-title\">\n//             Simple Realtime Code Sharing Editor App. Using Firebase Realtime\n//             Database and Code Mirror as Editor.\n//           </p>\n//           <div>\n//             <button className=\"btn\" onClick={this.onNewGround}>\n//               Share Code\n//             </button>\n//           </div>\n//         </div>\n//       </React.Fragment>\n//     );\n//   }\n// }\n\nimport React, { Component } from \"react\";\n\nclass Home extends Component {\n  constructor(props) {\n    super(props)\n\n    this.localVideoref = React.createRef();\n    this.remoteVideoref = React.createRef();\n  }\n\n  componentDidMount() {\n    const pc_config = null\n\n    this.pc = new RTCPeerConnection(pc_config)\n\n    this.pc.onicecandidate = (e) => {\n      if(e.candidate) console.log(JSON.stringify(e.candidate))\n    }\n\n    this.pc.oniceconnectionstatechange = (e) => {\n      console.log(e)\n    }\n\n    this.pc.onaddstream = (e) => {\n      this.remoteVideoref.current.srcObject = e.stream;\n    }\n\n    const constraints = { video: true }\n    // audio: true - to add audio\n\n    const success = (stream) => {\n      window.localStream = stream;\n      this.localVideoref.current.srcObject = stream;\n      this.pc.addStream(stream)\n    }\n\n    const failure = (e) => {\n      console.log('getUserMedia Error: ', e);\n    }\n\n    navigator.mediaDevices.getUserMedia( constraints )\n    .then( success )\n    .catch( failure )\n  }\n\n  // createOffer = () => {\n  //   console.log('offer')\n  //   this.pc.createOffer({offerToReceiveVideo: 1})\n  //     .then(sdp => {\n  //       console.log(JSON.stringify(sdp))\n  //       this.pc.setLocalDescription(sdp)\n  //     }, e => {})\n  // }\n  createOffer = () => {\n    console.log('offer')\n    this.pc.createOffer({offerToReceiveVideo: 1})\n      .then(num => {\n        console.log(num)\n        this.pc.setLocalDescription(num)\n      }, e => {})\n  }\n\n  setRemoteDescription = () => {\n    const desc = JSON.parse(this.textref.value)\n\n    this.pc.setRemoteDescription(new RTCSessionDescription(desc))\n  }\n\n  createAnswer = () => {\n    console.log('Answer')\n    this.pc.createAnswer({offerToReceiveVideo: 1})\n      .then(sdp => {\n        console.log(JSON.stringify(sdp))\n        this.pc.setLocalDescription(sdp)\n      }, e => {})\n  }\n\n  addCandidate = () => {\n    const candiate = JSON.parse(this.textref.value)\n    console.log(\"Adding candidate: \", candiate);\n\n    this.pc.addIceCandidate(new RTCIceCandidate(candiate))\n  }\n\n  render() {\n    \n    return (\n      <div>\n        {/* <video style = {{width: 240, height: 240, margin: 5, backgroundColor: 'black '}} ref={this.localVideoref} autoPlay></video> */}\n        <video style = {{width: 240, height: 240, margin: 5, backgroundColor: 'black '}} ref={this.remoteVideoref} autoPlay></video>\n     \n        <button onClick={this.createOffer}>Offer</button>\n        <button onClick={this.createAnswer}>Answer</button>\n        <br />\n        <textarea ref={ref => { this.textref = ref }}/>\n        <br />\n        <button onClick={this.setRemoteDescription}>Set Remote Desc</button>\n        <button onClick={this.addCandidate}>Add candiate</button>\n      </div>\n    );\n  }\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}